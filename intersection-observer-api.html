<html>
  <head>
    <title>The Intersection Observer API</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link
      rel="stylesheet"
      type="text/css"
      media="screen"
      href="src/css/style.css"
    />
  </head>

  <body>
    <div class="container">
      <a href="./index.html" id="backToHome" class="btn">Back to Home</a>
      <h1>The Intersection Observer API</h1>
      <p>
        The Intersection Observer API provides a way to asynchronously observe
        changes in the intersection of a target element with an ancestor element
        or with a top-level document's viewport.
      </p>
      <h2>Some more information</h2>
      <div>
        Historically, detecting visibility of an element, or the relative
        visibility of two elements in relation to each other, has been a
        difficult task for which solutions have been unreliable and prone to
        causing the browser and the sites the user is accessing to become
        sluggish. Unfortunately, as the web has matured, the need for this kind
        of information has grown. Intersection information is needed for many
        reasons, such as:

        <ul>
          <li class="text-content">
            Lazy-loading of images or other content as a page is scrolled.
          </li>
          <li class="text-content">
            Implementing "infinite scrolling" web sites, where more and more
            content is loaded and rendered as you scroll, so that the user
            doesn't have to flip through pages.
          </li>
          <li class="text-content">
            Reporting of visibility of advertisements in order to calculate ad
            revenues.
          </li>
          <li class="text-content">
            Deciding whether or not to perform tasks or animation processes
            based on whether or not the user will see the result.
          </li>
        </ul>
      </div>
      <h3>Example of Intersection Observer API</h3>
      <div class="observer">
        To see how it actually works, load this page from mobile screen or
        resize your browser window to a lower resolution.
        <span id="observerIntRatio"></span>
        <div class="image-holder">
          <img
            data-src="https://picsum.photos/200/300/?image=345"
            alt="random"
            width="200"
            height="300"
          />
        </div>
        <div class="image-holder">
          <img
            data-src="https://picsum.photos/200/300/?random&"
            alt="random"
            width="200"
            height="300"
          />
        </div>
      </div>
      <h3>Why do we use it?</h3>
      <div>
        Implementing intersection detection in the past involved event handlers
        and loops calling methods like
        <pre>Element.getBoundingClientRect()</pre>
        to build up the needed information for every element affected. Since all
        this code runs on the main thread, even one of these can cause
        performance problems. When a site is loaded with these tests, things can
        get downright ugly.
      </div>
      <h3>Browser compatibility</h3>
      <img
        src="src/img/compatibility-intersection-observer-api.png"
        alt="Intersection Observer API - Browser compatibility"
        title="Intersection Observer API - Browser compatibility"
      />
      <h3>More Info</h3>
      <div>
        <ul>
          <li>
            <a
              href="https://developer.mozilla.org/en-US/docs/Web/API/Intersection_Observer_API"
              target="_blank"
              rel="noreferrer noopener"
              >MDN web docs</a
            >
          </li>
          <li>
            <a
              href="https://developers.google.com/web/updates/2016/04/intersectionobserver"
              target="_blank"
              rel="noreferrer noopener"
            >
              Google Developers API
            </a>
          </li>
        </ul>
      </div>
    </div>
  </body>
  <script
    src="src/js/intersection-observer-api.js"
    type="text/javascript"
  ></script>
</html>
